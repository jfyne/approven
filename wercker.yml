box: wercker/golang
build-base:
deploy:
    id: google/cloud-sdk
    steps:
    - script:
      name: activate service account
      code: |
        echo $GOOGLE_JSON >> secret.json
        CLOUDSDK_PYTHON_SITEPACKAGES=1 gcloud auth activate-service-account $GOOGLE_ACCOUNT --key-file secret.json
box: wercker/golang
base:
    steps:
    - script:
      name: upload to gs
      code: |
        # Sync
        gsutil -m rsync -r -d root gs://www.approven.com
        # Create gz files
        gsutil -m cp -r -z html,css,js,xml,txt,json,map,svg / gs://www.approven.com